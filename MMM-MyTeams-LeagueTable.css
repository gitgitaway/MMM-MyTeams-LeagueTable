/*    MMM-MyTeams-LeagueTableCSS Styles
 * 
 * This file contains all the styling for the Football League Table module
 * Includes responsive design, color coding for different league positions,
 * and support for multiple leagues (SPFL, UCL, UEL, ECL)
 */

:root {
    /* Responsive font sizes using clamp for fluid typography */
    --mtlt-font-size-title: clamp(15px, 1.6vw, 19px);
    --mtlt-font-size-header: clamp(13px, 1.3vw, 17px);
    --mtlt-font-size-table: clamp(13px, 1.2vw, 16px);
    --mtlt-font-size-small: clamp(11px, 1.0vw, 14px);
    --mtlt-font-size-xsmall: clamp(10px, 0.9vw, 13px);
    
    /* Animation timing */
    --mtlt-transition-speed: 0.4s;

    /* Table height - set to 450px to show 12 teams */
    --mtlt-max-table-height: 450px;
}

/* Main container styling */
.spfl-league-table {
    color: #fff;
    line-height: 1.0;
    font-size: var(--mtlt-font-size-table);
    position: relative;
    width: 100%;
    max-width: 575px; /* Added max-width to prevent table from expanding too much */
    min-width:  500px; /* Set a minimum width for all tables */
    margin: 0 auto 120px auto; /* Moved up 30px from the bottom */
    contain: content; /* P-06: Improve browser reflow performance */
    overflow: hidden; /* Prevent horizontal scrollbars at module level */
}

/* League header container with buttons */
.league-header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 5px;
    border-bottom: 2px solid #555;
    max-width: 575px; /* Added max-width to prevent header from expanding too much */
}

/* League title styling */
.league-title {
    font-size: var(--mtlt-font-size-header);
    font-weight: 500;
    color: #ccc;
    text-transform: uppercase;
    letter-spacing: 1px;
}

/* Meta info styling (Last Updated and Refresh) */
.league-meta-info {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-left: auto;
}

.last-updated {
    font-size: var(--mtlt-font-size-xsmall);
    font-weight: 400;
    font-style: italic;
}

.refresh-btn {
    transition: color 0.3s ease, transform 0.3s ease;
}

.refresh-btn:hover {
    color: #fff !important;
    transform: rotate(30deg);
}

.refresh-btn.fa-spin {
    color: #018749 !important;
}

.pin-btn.active {
  color: #ff3333 !important; /* red when pinned */
 
}

/* League tabs wrapper for horizontal scroll indicators */
.league-tabs-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
    margin-bottom: 5px;
}

/* League buttons container */
.league-buttons-container {
    display: flex;
    gap: 5px;
    overflow-x: auto;
    overflow-y: hidden;
    padding: 5px 0;
    scrollbar-width: none; /* Hide standard scrollbar in Firefox */
    -ms-overflow-style: none; /* Hide standard scrollbar in IE/Edge */
    -webkit-overflow-scrolling: touch;
    width: 100%;
    scroll-behavior: smooth;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.league-buttons-container::-webkit-scrollbar {
    display: none;
}

/* Scroll indicator buttons */
.tab-scroll-btn {
    background: rgba(0, 0, 0, 0.5);
    border: none;
    color: #fff;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    z-index: 10;
    transition: all 0.2s ease;
    opacity: 0;
    visibility: hidden;
    position: absolute;
}

.tab-scroll-btn.visible {
    opacity: 1;
    visibility: visible;
}

.tab-scroll-btn:hover {
    background: rgba(0, 0, 0, 0.8);
    transform: scale(1.1);
}

.tab-scroll-btn.prev {
    left: -12px;
}

.tab-scroll-btn.next {
    right: -12px;
}

/* League button styling */
.league-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #ccc;
    padding: 4px 8px;
    font-size: var(--mtlt-font-size-small);
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 4px;
    font-weight: 500;
    opacity: 0.7; /* Inactive buttons have reduced opacity */
}

.league-btn:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: scale(1.05);
}

.league-btn.active {
    color: #fff;
    font-weight: bold;
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
    opacity: 1.0; /* Active buttons fully opaque */
    /* background-color: #999999 !important; /* Active buttons use light green background - !important overrides league-specific colors */
}

/* Gold border for World Cup tab */
.league-btn.gold-border {
    border: 2px solid #FFD700 !important;
    box-shadow: 0 0 10px rgba(255, 215, 0, 0.5) !important;
    opacity: 1.0 !important;
}

/* Flag image styling - replaces emoji flags with actual PNG images */
.league-btn .flag-image {
    width: 16px;
    height: 12px;
    display: inline-block;
    object-fit: contain;
    margin: 0;
    padding: 0;
    border-radius: 2px;
    pointer-events: none; /* Ensure clicks pass through to the button */
}

/* 50% size increase for World Cup and UEFA competition tab images (P-08) */
.league-btn[data-league="WORLD_CUP_2026"] .flag-image,
.league-btn[data-league="UEFA_CHAMPIONS_LEAGUE"] .flag-image,
.league-btn[data-league="UEFA_EUROPA_LEAGUE"] .flag-image,
.league-btn[data-league="UEFA_EUROPA_CONFERENCE_LEAGUE"] .flag-image,
.league-btn[data-league="UCL"] .flag-image,
.league-btn[data-league="UEL"] .flag-image,
.league-btn[data-league="ECL"] .flag-image {
    width: 32px;
    height: 24px;
}

/* Fallback for emoji flags (if image fails to load) */
.league-btn .flag-emoji {
    font-size: 16px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    line-height: 1;
    pointer-events: none; /* Ensure clicks pass through to the button */
}

/* 50% size increase for World Cup and UEFA competition tab emojis (P-08) */
.league-btn[data-league="WORLD_CUP_2026"] .flag-emoji,
.league-btn[data-league="UEFA_CHAMPIONS_LEAGUE"] .flag-emoji,
.league-btn[data-league="UEFA_EUROPA_LEAGUE"] .flag-emoji,
.league-btn[data-league="UEFA_EUROPA_CONFERENCE_LEAGUE"] .flag-emoji,
.league-btn[data-league="UCL"] .flag-emoji,
.league-btn[data-league="UEL"] .flag-emoji,
.league-btn[data-league="ECL"] .flag-emoji {
    font-size: 24px;
}

/* League abbreviation text */
.league-btn .league-abbr {
    font-size: var(--mtlt-font-size-xsmall);
    font-weight: 600;
    letter-spacing: 0.5px;
    text-transform: uppercase;
    display: inline-block;
    pointer-events: none; /* Ensure clicks pass through to the button */
}

/* Different colors for each league button when active */
/* Legacy codes */
.league-btn[data-league="SPFL"].active {
    background: rgba(0, 135, 73, 0.7); /* Celtic green */
}

.league-btn[data-league="UCL"].active,
.league-btn[data-league="UEFA_CHAMPIONS_LEAGUE"].active {
    background: rgba(30, 144, 255, 0.7); /* Champions League blue */
}

.league-btn[data-league="UEL"].active,
.league-btn[data-league="UEFA_EUROPA_LEAGUE"].active {
    background: rgba(255, 140, 0, 0.7); /* Europa League orange */
}

.league-btn[data-league="ECL"].active,
.league-btn[data-league="UEFA_EUROPA_CONFERENCE_LEAGUE"].active {
    background: rgba(50, 205, 50, 0.7); /* Conference League green */
}

.league-btn[data-league="EPL"].active {
    background: rgba(63, 16, 126, 0.7); /* Premier League purple */
}

.league-btn[data-league="SPFLC"].active {
    background: rgba(220, 20, 60, 0.7); /* Scottish Championship red */
}

/* New league codes with country-based colors */
/* Scotland */
.league-btn[data-league="SCOTLAND_PREMIERSHIP"].active,
.league-btn[data-league="SCOTLAND_CHAMPIONSHIP"].active {
    background: rgba(0, 135, 73, 0.7); /* Scottish green */
}

/* England */
.league-btn[data-league="ENGLAND_PREMIER_LEAGUE"].active {
    background: rgba(63, 16, 126, 0.7); /* Premier League purple */
}

/* Germany */
.league-btn[data-league="GERMANY_BUNDESLIGA"].active {
    background: rgba(200, 16, 46, 0.7); /* German red */
}

/* France */
.league-btn[data-league="FRANCE_LIGUE1"].active {
    background: rgba(0, 85, 164, 0.7); /* French blue */
}

/* Spain */
.league-btn[data-league="SPAIN_LA_LIGA"].active {
    background: rgba(255, 196, 0, 0.7); /* Spanish gold */
}

/* Italy */
.league-btn[data-league="ITALY_SERIE_A"].active {
    background: rgba(0, 87, 184, 0.7); /* Italian blue */
}

/* Netherlands */
.league-btn[data-league="NETHERLANDS_EREDIVISIE"].active {
    background: rgba(255, 112, 67, 0.7); /* Dutch orange */
}

/* Belgium */
.league-btn[data-league="BELGIUM_PRO_LEAGUE"].active {
    background: rgba(255, 197, 0, 0.7); /* Belgian yellow */
}

/* Portugal */
.league-btn[data-league="PORTUGAL_PRIMEIRA_LIGA"].active {
    background: rgba(0, 119, 55, 0.7); /* Portuguese green */
}

/* Greece */
.league-btn[data-league="GREECE_SUPER_LEAGUE"].active {
    background: rgba(0, 112, 192, 0.7); /* Greek blue */
}

/* Turkey */
.league-btn[data-league="TURKEY_SUPER_LIG"].active {
    background: rgba(206, 17, 38, 0.7); /* Turkish red */
}

/* Ukraine */
.league-btn[data-league="UKRAINE_PREMIER_LEAGUE"].active {
    background: rgba(0, 91, 187, 0.7); /* Ukrainian blue */
}

/* Romania */
.league-btn[data-league="ROMANIA_LIGA_I"].active {
    background: rgba(0, 150, 136, 0.7); /* Romanian teal */
}

/* Croatia */
.league-btn[data-league="CROATIA_HNL"].active {
    background: rgba(255, 0, 0, 0.7); /* Croatian red */
}

/* Serbia */
.league-btn[data-league="SERBIA_SUPER_LIGA"].active {
    background: rgba(0, 56, 147, 0.7); /* Serbian blue */
}

/* Austria */
.league-btn[data-league="AUSTRIA_BUNDESLIGA"].active {
    background: rgba(237, 27, 36, 0.7); /* Austrian red */
}

/* Czech Republic */
.league-btn[data-league="CZECH_LIGA"].active {
    background: rgba(17, 35, 126, 0.7); /* Czech blue */
}

/* Hungary */
.league-btn[data-league="HUNGARY_NBI"].active {
    background: rgba(206, 17, 38, 0.7); /* Hungarian red */
}

/* Poland */
.league-btn[data-league="POLAND_EKSTRAKLASA"].active {
    background: rgba(255, 0, 0, 0.7); /* Polish red */
}

/* Switzerland */
.league-btn[data-league="SWITZERLAND_SUPER_LEAGUE"].active {
    background: rgba(255, 0, 0, 0.7); /* Swiss red */
}

/* Sweden */
.league-btn[data-league="SWEDEN_ALLSVENSKAN"].active {
    background: rgba(0, 85, 152, 0.7); /* Swedish blue */
}

/* Norway */
.league-btn[data-league="NORWAY_ELITESERIEN"].active {
    background: rgba(186, 12, 47, 0.7); /* Norwegian red */
}

/* Denmark */
.league-btn[data-league="DENMARK_SUPERLIGAEN"].active {
    background: rgba(196, 0, 0, 0.7); /* Danish red */
}

/* Back to top button control container - sticky at bottom of scroll area */
.back-to-top-controls {
    flex: 0 0 auto;                 /* Don't grow or shrink */
    position: sticky;               /* Ensure it sticks to bottom of module */
    bottom: 0;
    display: flex !important;       /* Always visible (Task: Make source footer sticky) */
    justify-content: space-between !important; /* Space items out */
    align-items: center !important;
    padding: 4px 8px !important;    /* Reduced padding */
    background: rgba(0, 0, 0, 0.8) !important; /* Darker background for readability */
    border-top: 1px solid rgba(255, 255, 255, 0.1) !important; /* subtle top border */
    z-index: 50 !important;         /* above table content, below header */
    transition: opacity 0.2s ease-in-out !important;
    pointer-events: auto !important; /* always clickable */
}

/* Visibility classes kept for compatibility but overridden by base class always-on behavior */
.back-to-top-controls.visible {
    display: flex !important;
}

/* Back to top button - styled to match original but positioned within scroll container */
.back-to-top-btn {
    background: #018749;            /* Celtic green */
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.25);
    border-radius: 4px;
    padding: 6px 8px;
    font-size: 11px;
    line-height: 1.0;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 3px 8px rgba(0, 0, 0, 0.4);
}

.back-to-top-btn:hover {
    opacity: 1;                     /* full opacity on hover */
    transform: translateY(-3px);    /* lift effect on hover */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
}

/* Content container for scrollable table */
.league-content-container {
    max-height: var(--mtlt-max-table-height, 450px); /* Limited to 450px to show 12 teams */
    max-width: 575px; /* Added max-width to prevent container from expanding too much */
    overflow-y: hidden; /* Prevent double scrollbars - scrolling happens in league-body-scroll */
    overflow-x: hidden; /* Remove horizontal scrollbar */
    position: relative;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) rgba(0, 0, 0, 0.1);
    scroll-behavior: smooth; /* Enable smooth scrolling */
    display: flex;
    flex-direction: column;
    animation: mtlt-fade-in var(--mtlt-transition-speed) ease-out;
    contain: content; /* P-06: Optimize browser reflows/repaints */
}

@keyframes mtlt-fade-in {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
}

/* Table header styling */
.spfl-header {
    font-size: var(--mtlt-font-size-header);
    font-weight: bold;
    text-align: left;
    margin-bottom: 10px;
    color: #ccc;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-bottom: 2px solid #555;
    padding-bottom: 5px;
}

/* Table body styling */
.spfl-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 2px;
    table-layout: auto; /* Allow columns to fit content */
}

.spfl-table th {
    font-size: var(--mtlt-font-size-small);
    color: #888;
    text-transform: uppercase;
    font-weight: bold;
    padding: 8px 4px;
    border-bottom: 1px solid #333;
}

.spfl-table td {
    padding: 4px 2px;
    vertical-align: middle;
    height: 32px;
    box-sizing: border-box;
}

/* Fixed position/team column alignment */
.pos-cell {
    text-align: center;
    width: 25px;
    font-weight: bold;
    color: #aaa;
}

.team-cell {
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 120px;
}

/* Team logo styling */
.team-logo {
    width: 18px;
    height: 18px;
    margin-right: 4px;
    vertical-align: middle;
    object-fit: contain;
}

/* Stats columns */
.played-cell, .won-cell, .drawn-cell, .lost-cell, 
.gf-cell, .ga-cell, .gd-cell, .points-cell {
    text-align: center;
    width: 30px;
}

.gd-cell.positive { color: #00ff00; }
.gd-cell.negative { color: #ff0000; }
.gd-cell.neutral { color: #aaa; }

.points-cell {
    font-weight: bold;
    color: #fff;
}

/* Form tokens */
.form-cell {
    text-align: left;
    width: 100px;
    padding-left: 10px !important;
}

.form-tokens {
    display: flex;
    gap: 8px;
    justify-content: center;
}

.form-tokens span {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 18px;
    height: 18px; /* Square tokens for better vertical alignment */
    box-sizing: border-box; /* Ensure border doesn't change dimensions */
    padding: 0;
    border-radius: 2px;
    font-size: var(--mtlt-font-size-xsmall);
    font-weight: bold;
    color: #fff;
    line-height: 1;
}

.form-win { 
    background-color: #018749; 
    border: 1px solid #016a3a;
    color: #fff;
}
.form-draw { 
    background-color: #666; 
    border: 1px solid #444;
    color: #fff;
}
.form-loss { 
    background-color: #ff3333; 
    border: 1px solid #cc0000;
    color: #fff;
}
.form-missing { color: #555; background-color: transparent; }

/* Tooltip styling for form tokens */
.form-tokens .has-tooltip {
    position: relative;
    cursor: help;
}

.form-tokens .has-tooltip::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 125%;
    left: 50%;
    transform: translateX(-50%);
    background-color: rgba(0, 0, 0, 0.9);
    color: #fff;
    padding: 5px 8px;
    border-radius: 4px;
    font-size: 10px;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s;
    z-index: 100;
    pointer-events: none;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 2px 5px rgba(0,0,0,0.5);
}

.form-tokens .has-tooltip:hover::after {
    opacity: 1;
    visibility: visible;
}

/* Tooltip arrow */
.form-tokens .has-tooltip::before {
    content: "";
    position: absolute;
    top: -5px;
    left: 50%;
    transform: translateX(-50%);
    border-width: 5px;
    border-style: solid;
    border-color: rgba(0, 0, 0, 0.9) transparent transparent transparent;
    opacity: 0;
    visibility: hidden;
    transition: opacity 0.3s;
    z-index: 100;
    pointer-events: none;
}

.form-tokens .has-tooltip:hover::before {
    opacity: 1;
    visibility: visible;
}

/* ----------------------------- */
/* Mode-Specific Refinements (P-02) */
/* ----------------------------- */

/* National League Mode */
.league-mode-national .team-cell {
    font-weight: 500;
}

/* UEFA Mode */
.league-mode-uefa .league-row.uefa-zone {
    background-color: rgba(30, 144, 255, 0.15);
}

/* World Cup Mode */
.league-mode-wc .spfl-league-table {
    border: 1px solid rgba(255, 215, 0, 0.2);
}

.league-mode-wc .league-title {
    color: #FFD700;
}

/* Row coloring based on league position */
.team-row.promotion-zone {
    background-color: rgba(0, 135, 73, 0.15);
}

.team-row.uefa-zone {
    background-color: rgba(30, 144, 255, 0.15);
}

.team-row.relegation-zone {
    background-color: rgba(220, 20, 60, 0.15);
}

.team-row.uefa-elimination-zone {
    background-color: rgba(255, 215, 0, 0.15) !important;
}

.team-row.highlighted {
    background-color: rgba(255, 215, 0, 0.15) !important;
    font-weight: bold;
}

/* Compact mode for small screens - preserve form if possible */
@media (max-width: 480px) {
    .team-cell { min-width: 100px; }
    .played-cell, .won-cell, .drawn-cell, .lost-cell { display: none; }
    /* .form-cell { display: none; } -- commented out to ensure form displays even on narrow screens */
}

/* Scroll button styling */
.scroll-controls {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    padding: 5px;
    margin-top: 5px;
}

.scroll-btn {
    background: #333;
    border: none;
    color: #fff;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
}

/* Footer styling */
.spfl-footer {
    padding: 10px 4px;
    text-align: right;
    border-top: 1px solid #333;
}

.footer-source {
    font-size: var(--mtlt-font-size-xsmall);
    color: #666;
    font-style: italic;
}

/* Clear cache button */
.clear-cache-btn {
    background: transparent;
    border: 1px solid #444;
    color: #666;
    font-size: var(--mtlt-font-size-xsmall);
    padding: 2px 6px;
    border-radius: 3px;
    cursor: pointer;
    margin-left: 10px;
}

.clear-cache-btn:hover {
    color: #fff;
    border-color: #888;
}

/* Pin button styling */
.pin-btn {
  background: transparent;
  border: none;
  color: #666;
  font-size: 12px;
  cursor: pointer;
  padding: 0 4px;
  transition: all 0.3s ease;
}

.pin-btn:hover {
  color: #fff;
}

.pin-btn.active {
  color: #ff3333; /* red when pinned */
}

/* World Cup 2026 Specific Styles */
.wc2026-container {
    padding: 10px;
    animation: mtlt-fade-in var(--mtlt-transition-speed) ease-out;
}

.wc2026-groups-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 10px;
}

.wc2026-group-block {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 8px;
    padding: 12px;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

.wc2026-group-title {
    font-size: var(--mtlt-font-size-header);
    font-weight: bold;
    color: #FFD700; /* Gold */
    margin-bottom: 8px;
    text-align: center;
    text-transform: uppercase;
}

/* WC2026 Fixture Layouts */
.wc2026-fixtures-container {
    margin-top: 20px;
    border-top: 2px solid #555;
    padding-top: 15px;
}

.wc2026-section-title {
    font-size: var(--mtlt-font-size-header);
    font-weight: bold;
    color: #fff;
    margin: 15px 0 10px 0;
    text-transform: uppercase;
    border-left: 4px solid #018749;
    padding-left: 10px;
}

.wc2026-fixture-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px;
    background: rgba(255, 255, 255, 0.03);
    margin-bottom: 5px;
    border-radius: 4px;
}

.wc2026-fixture-time {
    font-size: var(--mtlt-font-size-xsmall);
    color: #aaa;
    width: 50px;
}

.wc2026-fixture-teams {
    flex-grow: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 10px;
    font-weight: 500;
}

.wc2026-fixture-score {
    font-weight: bold;
    color: #FFD700;
    min-width: 40px;
    text-align: center;
}

/* Multi-tab View (Sub-tabs for Groups/Knockouts) */
.wc-subtabs-container {
    display: flex;
    gap: 4px; /* Reduced gap */
    margin-bottom: 12px;
    flex-wrap: nowrap; /* Ensure they stay on one line */
    overflow-x: auto; /* Allow horizontal scroll if still too many */
    scrollbar-width: none; /* Hide scrollbar for cleaner look */
    justify-content: flex-start; /* Start from left */
    padding: 2px 0;
}

.wc-subtabs-container::-webkit-scrollbar {
    display: none;
}

.wc-btn {
    background: transparent !important; /* P-08: Remove background color */
    border: 1px solid rgba(255, 255, 255, 0.15); /* Thin default border */
    color: #888;
    padding: 2px 5px; /* Further reduced padding for compact fit */
    font-size: 9px; /* Further reduced font size to ensure single row fit */
    border-radius: 3px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-weight: 500;
    flex-shrink: 0; /* Prevent buttons from shrinking */
}

.wc-btn:hover {
    background: rgba(255, 255, 255, 0.05) !important;
    color: #fff;
    border-color: rgba(255, 255, 255, 0.4);
}

.wc-btn.active {
    color: #fff;
    font-weight: bold;
    border-width: 1.5px !important;
}

/* League-specific thin border colors for sub-tabs (P-08) */
.spfl-league-table[data-league="WORLD_CUP_2026"] .wc-btn.active {
    border-color: #FFD700 !important; /* Gold */
    color: #FFD700;
}

.spfl-league-table[data-league="UEFA_CHAMPIONS_LEAGUE"] .wc-btn.active,
.spfl-league-table[data-league="UCL"] .wc-btn.active {
    border-color: #1e90ff !important; /* Blue */
    color: #1e90ff;
}

.spfl-league-table[data-league="UEFA_EUROPA_LEAGUE"] .wc-btn.active,
.spfl-league-table[data-league="UEL"] .wc-btn.active {
    border-color: #ff8c00 !important; /* Orange */
    color: #ff8c00;
}

.spfl-league-table[data-league="UEFA_EUROPA_CONFERENCE_LEAGUE"] .wc-btn.active,
.spfl-league-table[data-league="ECL"] .wc-btn.active {
    border-color: #32cd32 !important; /* Green */
    color: #32cd32;
}

/* Base border colors for inactive sub-tabs based on league mode */
.league-mode-wc .wc-btn { border-color: rgba(255, 215, 0, 0.2); }
.league-mode-uefa .wc-btn { border-color: rgba(255, 255, 255, 0.15); }

/* Ensure refresh button in WC/UEFA matches style */
.refresh-btn-wc {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 28px;
    height: 24px;
    padding: 0 !important;
}


/* Stale Data Warning Styling */
.stale-data-warning {
    color: #ff9800; /* Orange color for warning */
    margin-right: 5px;
    cursor: help;
    animation: mtlt-pulse 2s infinite;
}

@keyframes mtlt-pulse {
    0% { opacity: 1; }
    50% { opacity: 0.5; }
    100% { opacity: 1; }
}

/* Fade in for sub-content */
.sub-content-fade-in {
    animation: mtlt-fade-in 0.5s ease-out;
}

/* Fixtures Header Container */
.fixtures-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
    padding: 5px 0;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.fixtures-title {
    font-size: var(--mtlt-font-size-header);
    font-weight: 700;
    color: #fff;
    text-transform: uppercase;
}

/* Enhanced 3-Column Centered Fixture Layout (P-05) */
.fixtures-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.fixture-day-block {
    display: flex;
    flex-direction: column;
    gap: 4px;
}

.fixture-date-header {
    font-size: var(--mtlt-font-size-xsmall);
    color: #888;
    text-transform: uppercase;
    font-weight: 600;
    letter-spacing: 1px;
    margin-bottom: 4px;
    padding-left: 4px;
    border-left: 2px solid #555;
}

/* The Core Centered Container */
.fixture-row {
    display: grid;
    grid-template-columns: 1fr 60px 1fr; /* Equal space for teams, fixed center for score/time */
    align-items: center;
    padding: 8px 4px;
    background: rgba(255, 255, 255, 0.02);
    border-radius: 4px;
    transition: background 0.3s ease;
}

.fixture-row:hover {
    background: rgba(255, 255, 255, 0.05);
}

/* Home Team (Right Aligned) */
.home-team {
    display: flex;
    justify-content: flex-end;
    align-items: center;
    gap: 8px;
    text-align: right;
    font-size: var(--mtlt-font-size-table);
}

/* Away Team (Left Aligned) */
.away-team {
    display: flex;
    justify-content: flex-start;
    align-items: center;
    gap: 8px;
    text-align: left;
    font-size: var(--mtlt-font-size-table);
}

/* Centered Score or Time */
.fixture-status {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.fixture-score, .fixture-time {
    font-weight: bold;
    font-size: var(--mtlt-font-size-table);
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 3px;
    min-width: 45px;
    text-align: center;
}

.fixture-score {
    color: #FFD700; /* Gold for scores */
}

.fixture-time {
    color: #aaa;
    font-weight: 500;
}

/* Live Indicator */
.live-badge {
    font-size: 8px;
    color: #ff3333;
    font-weight: bold;
    margin-top: 2px;
    animation: mtlt-pulse 1.5s infinite;
}

/* Aggregate Score */
.agg-score {
    font-size: var(--mtlt-font-size-xsmall);
    color: #666;
    margin-top: 2px;
}

/* Venue/Stadium Info */
.fixture-venue {
    font-size: var(--mtlt-font-size-xsmall);
    color: #555;
    font-style: italic;
    grid-column: 1 / span 3; /* Spans full width */
    text-align: center;
    margin-top: 4px;
}

/* Responsive adjustments for fixtures */
@media (max-width: 400px) {
    .fixture-row {
        grid-template-columns: 1fr 50px 1fr;
    }
    .home-team, .away-team {
        font-size: var(--mtlt-font-size-small);
    }
}

/* Scroll Control Buttons (Header/Footer) */
.scroll-btn-container {
    display: flex;
    flex-direction: column;
    gap: 5px;
}

.scroll-nav-btn {
    background: rgba(255, 255, 255, 0.1);
    border: none;
    color: #ccc;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 10px;
    transition: all 0.2s ease;
}

.scroll-nav-btn:hover:not(:disabled) {
    background: rgba(255, 255, 255, 0.2);
    color: #fff;
}

.scroll-nav-btn:disabled {
    opacity: 0.3;
    cursor: default;
}

/* Error and Retry State Styling */
.error-state, .retry-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 30px 20px;
    gap: 12px;
    text-align: center;
    width: 100%;
}

.error-icon {
    font-size: 24px;
    color: #ff4444;
}

.retry-icon {
    font-size: 20px;
    color: #018749;
}

.retry-btn-error {
    background: #444;
    color: #fff;
    border: 1px solid #666;
    border-radius: 4px;
    padding: 6px 12px;
    font-size: 11px;
    cursor: pointer;
    margin-top: 8px;
    transition: all 0.3s ease;
}

.retry-btn-error:hover {
    background: #018749;
    border-color: #01a85c;
}

/* Hide/Show toggle icon - positioned at bottom left of module */
.LeagueTable-toggle-icon {
  position: relative; /* Changed from absolute to work within source footer flexbox */
  width: 4px;
  height: 4px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #000;
  color: #fff;
  border: 0px solid #018749;
  border-radius: 4px;
  font-size: 10px;
  cursor: pointer;
  opacity: 0.5;
  visibility: hidden;
  pointer-events: none;
  transition: opacity 0.2s ease, background 0.2s ease, transform 0.1s ease;
  z-index: 100;
}

/* Visible when content is hidden OR when scrolling */
.LeagueTable-toggle-icon.visible {
  opacity: 1.0; /* Increased visibility */
  visibility: visible;
  pointer-events: auto;
}

/* Center at bottom middle when table is hidden */
.content-hidden {
  min-height: 40px;
}

.LeagueTable-toggle-icon:hover {
  opacity: 1;
  background: #018749;
  color: #fff;
}

.LeagueTable-toggle-icon:active {
  transform: scale(0.95);
}

/* New 8-Column Tabulated Grid for Fixtures */
:root {
    --mtlt-fixture-date-width: 14%;
    --mtlt-fixture-time-width: 8%;
    --mtlt-fixture-team-width: 18%;
    --mtlt-fixture-logo-width: 4%;
    --mtlt-fixture-score-width: 12%;
    --mtlt-fixture-location-width: 22%;
    
    --mtlt-fixture-font-size: 11px; /* Reduced from table size (13-16px) */
    --mtlt-fixture-header-font-size: 10px; /* Reduced from xsmall size (10-13px) */
    
    --mtlt-fixture-date-align: left;
    --mtlt-fixture-time-align: center;
    --mtlt-fixture-home-team-align: right;
    --mtlt-fixture-home-logo-align: center;
    --mtlt-fixture-score-align: center;
    --mtlt-fixture-away-logo-align: center;
    --mtlt-fixture-away-team-align: left;
    --mtlt-fixture-location-align: left;
}

.fixtures-container {
    width: 100%;
    display: flex;
    justify-content: center;
    margin: 10px 0;
}

/* Container for the sticky header and scrollable body */
.fixtures-wrapper-v2 {
    width: 100%;
    display: flex;
    flex-direction: column;
    max-height: 450px; /* Adjust based on your MagicMirror layout */
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
}

/* Header container - always visible */
.fixtures-header-container {
    flex: 0 0 auto;
    background: rgba(34, 34, 34, 0.95);
    z-index: 10;
    border-bottom: 2px solid #444;
}

/* Scrollable body container */
.fixtures-body-scroll {
    flex: 1 1 auto;
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

/* Restricted height for specific tournament rounds (Tasks 3 & 4) */
.fixtures-body-scroll.restricted-height {
    max-height: 280px; /* Approximately 8 fixtures */
}

.fixtures-body-scroll::-webkit-scrollbar {
    width: 6px;
    background: transparent; /* Chrome/Safari: transparent track */
}

.fixtures-body-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.fixtures-body-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2); /* Visible with 0.2 transparency */
    border-radius: 3px;
}

/* UEFA Split-View Layout - Equal height allocation for Results and Future Fixtures */
/* Container holds both results and upcoming sections with independent scrolling.
   Height increased from 340px to 500px to accommodate up to 8 results
   (e.g. 4 fixtures from leg 1 + 4 from leg 2 on back-to-back play-off nights). */
.uefa-split-view-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    height: 500px; /* 2 sections × 240px + 20px gap */
    gap: 20px;
}

/* Each section wrapper contains title + scrollable content.
   Height increased from 165px to 240px so that up to 8 items can scroll
   without clipping the last visible fixture row. */
.uefa-section-wrapper {
    display: flex;
    flex-direction: column;
    height: 240px; /* Increased from 165px — comfortably shows 6-8 fixtures with scroll */
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
    background: rgba(34, 34, 34, 0.3);
}

/* Completion states: Maximized/Minimized heights for UEFA sections */
.uefa-section-wrapper.maximized-section {
    height: 400px;
}

.uefa-section-wrapper.minimized-section {
    height: 80px;
}

/* Title for each section - reduced padding and font size to maximize fixture space */
.uefa-section-wrapper .wc-title {
    flex: 0 0 auto;
    padding: 4px 8px; /* Reduced from 8px 10px to save space */
    font-size: 11px; /* Reduced font size */
    background: rgba(34, 34, 34, 0.95);
    border-bottom: 2px solid #444;
    text-align: center;
    font-weight: bold;
    letter-spacing: 1px;
}

/* Scrollable content area for each section */
.uefa-section-scroll {
    flex: 1 1 auto;
    overflow-y: auto;
    overflow-x: hidden;
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.uefa-section-scroll::-webkit-scrollbar {
    width: 6px;
    background: transparent;
}

.uefa-section-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.uefa-section-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 3px;
}

.uefa-section-scroll::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.4);
}

/* Equal sizing for both sections - no dynamic growth.
   Both sections maintain the same fixed height (240px) to show up to ~6 fixtures
   with scrolling available for more. */
.uefa-section-wrapper.results-section {
    height: 240px;
}

.uefa-section-wrapper.future-section {
    height: 240px;
}

/* League Table Sticky Header & Scrollable Body */
.league-table-wrapper-v2 {
    width: 100%;
    display: flex;
    flex-direction: column;
    max-height: var(--mtlt-max-table-height, 750px); /* Use variable to ensure consistency across versions */
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 4px;
    overflow: hidden;
}

.league-header-sticky {
    flex: 0 0 auto;
    background: rgba(34, 34, 34, 0.95);
    z-index: 10;
    border-bottom: 2px solid #555;
    overflow-y: scroll; /* Match body scrollbar gutter */
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.league-header-sticky::-webkit-scrollbar {
    width: 6px;
    background: transparent;
}

.league-header-sticky::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
}

.league-body-scroll {
    flex: 1 1 auto;
    overflow-y: auto;
    overflow-x: hidden; /* Remove horizontal scrollbar */
    scrollbar-width: thin;
    scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
}

.league-body-scroll::-webkit-scrollbar {
    width: 6px;
}

.league-body-scroll::-webkit-scrollbar-track {
    background: transparent;
}

.league-body-scroll::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2); /* Visible with 0.2 transparency */
    border-radius: 3px;
}

.wc-sticky-top {
    position: sticky;
    top: 0;
    z-index: 100;
    background: #000;
    padding-bottom: 5px;
}

.spfl-table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
}

.spfl-table th {
    padding: 8px 2px;
    text-transform: uppercase;
    font-size: var(--mtlt-font-size-xsmall);
    color: #888;
    text-align: center;
    vertical-align: middle;
    height: 30px;
    box-sizing: border-box;
}

.team-row {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

.team-row.highlighted {
    background: rgba(255, 255, 255, 0.1) !important;
}

/* Column Widths for alignment */
.position-header, .position-cell { width: 22px; }
.team-header, .team-cell { text-align: left !important; }
.played-header, .played-cell,
.won-header, .won-cell,
.drawn-header, .drawn-cell,
.lost-header, .lost-cell,
.gf-header, .gf-cell,
.ga-header, .ga-cell,
.gd-header, .gd-cell,
.points-header, .points-cell { width: 26px; text-align: center; }
.form-header, .form-cell { 
    width: 150px; /* 70px base + 40px left gap + 40px right gap */
    text-align: center; 
    padding-left: 42px !important; /* 40px gap + 2px existing padding */
    padding-right: 42px !important; /* 40px gap + 2px existing padding */
}


.wc-fixtures-table-v2 th {
    font-size: var(--mtlt-fixture-header-font-size);
    color: #888;
    text-transform: uppercase;
    padding: 10px 4px;
    text-align: center;
}

/* Reduced header padding for UEFA split-view sections to maximize fixture display space */
.uefa-section-scroll .wc-fixtures-table-v2 th {
    padding: 5px 4px; /* Reduced from 10px 4px */
    font-size: 9px; /* Reduced from 10px */
}

.fixture-row-v2 {
    border-bottom: 1px solid rgba(255, 255, 255, 0.05);
    transition: background 0.3s ease;
}

.fixture-row-v2.current-fixture {
    background: rgba(255, 215, 0, 0.05); /* Subtle gold highlight for current match */
}

.fixture-row-v2:hover {
    background: rgba(255, 255, 255, 0.03);
}

.fixture-row-v2 td {
    padding: 8px 4px;
    vertical-align: middle;
    font-size: var(--mtlt-fixture-font-size);
}

/* Reduced row padding for UEFA split-view sections to fit exactly 4 fixtures */
.uefa-section-scroll .fixture-row-v2 td {
    padding: 6px 4px; /* Reduced from 8px 4px to fit 4 fixtures per section */
}

/* Column Widths & Alignment */
.fixture-date-v2, .fixture-header-date {
    text-align: var(--mtlt-fixture-date-align);
    width: var(--mtlt-fixture-date-width);
    overflow: hidden;
    text-overflow: ellipsis;
}

.fixture-time-v2, .fixture-header-time {
    text-align: var(--mtlt-fixture-time-align);
    width: var(--mtlt-fixture-time-width);
}

.fixture-home-team-v2, .fixture-header-home-team {
    text-align: var(--mtlt-fixture-home-team-align);
    width: var(--mtlt-fixture-team-width);
    font-weight: 500;
}

.fixture-home-logo-v2, .fixture-header-home-logo {
    text-align: var(--mtlt-fixture-home-logo-align);
    width: var(--mtlt-fixture-logo-width);
}

.fixture-score-v2, .fixture-header-score {
    text-align: var(--mtlt-fixture-score-align);
    width: var(--mtlt-fixture-score-width);
    font-weight: bold;
}

.fixture-away-team-v2, .fixture-header-away-team {
    text-align: var(--mtlt-fixture-away-team-align);
    width: var(--mtlt-fixture-team-width);
    font-weight: 500;
}

.fixture-away-logo-v2, .fixture-header-away-logo {
    text-align: var(--mtlt-fixture-away-logo-align);
    width: var(--mtlt-fixture-logo-width);
}

.fixture-location-v2, .fixture-header-location, .fixture-header-venue {
    text-align: var(--mtlt-fixture-location-align);
    width: var(--mtlt-fixture-location-width);
    font-size: var(--mtlt-fixture-font-size);
    color: #aaa;
}

/* Location Column */
.fixture-location-v2, .fixture-header-location {
    text-align: var(--mtlt-fixture-location-align);
    width: var(--mtlt-fixture-location-width);
}

.fixture-logo-v2 {
    width: 20px;
    height: 20px;
    object-fit: contain;
    display: inline-block;
    vertical-align: middle;
}

.score-wrapper-v2 {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 2px;
}

.main-score-v2 {
    font-weight: bold;
    color: #FFD700; /* Gold */
    white-space: nowrap;
}

.main-score-v2.bright {
    color: #fff;
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}

.aggregate-score-v2 {
    font-size: 0.85em;
    font-style: italic;
    color: #aaa;
}

/* Fixture status coloring and indicators (Task: Coloured Indicators) */
.fixture-row-v2.live .main-score-v2 {
    color: #fff;
    text-shadow: 0 0 8px rgba(255, 51, 51, 0.8);
}

.fixture-status-tag-v2 {
    font-size: 0.8em;
    padding: 1px 4px;
    border-radius: 2px;
    font-weight: bold;
}

.fixture-status-tag-v2.live-tag {
    color: #fff;
    background-color: #ff3333; /* BBC Red for live minutes */
    animation: livePulse 2s infinite;
}

.fixture-row-v2.finished .main-score-v2 {
    color: #fff;
    font-weight: bold;
}

.fixture-row-v2.upcoming .main-score-v2 {
    color: #666;
    font-weight: normal;
}

.fixture-row-v2.upcoming .fixture-time-v2 {
    color: #fff;
    font-weight: bold;
}

@keyframes livePulse {
    0% { opacity: 1; }
    50% { opacity: 0.6; }
    100% { opacity: 1; }
}

/* Responsive adjustments for the new grid */
@media (max-width: 600px) {
    .fixture-date-v2 {
        font-size: 0.9em;
    }
    .fixture-location-v2 {
        display: none; /* Hide location on small screens to save space */
    }
    .fixture-header-location {
        display: none;
    }
}

/* ==========================================
   HIGH CONTRAST MODE SUPPORT (A11Y-03)
   WCAG 2.1 Level AAA: 7:1 contrast ratio
   ========================================== */

@media (prefers-contrast: high) {
    :root {
        /* High contrast color palette - 7:1 minimum contrast */
        --hc-text-primary: #FFFFFF;
        --hc-text-secondary: #FFFF00;  /* Yellow for emphasis */
        --hc-background: #000000;
        --hc-border: #FFFFFF;
        --hc-accent: #00FF00;  /* Green for positive indicators */
        --hc-alert: #FF0000;   /* Red for negative indicators */
        --hc-neutral: #CCCCCC;
    }

    .spfl-league-table {
        background-color: var(--hc-background);
        color: var(--hc-text-primary);
        border: 2px solid var(--hc-border);
    }

    /* Headers and titles */
    .league-title,
    .league-header-container,
    .wc-subtabs-container,
    .league-buttons-container {
        color: var(--hc-text-primary);
        border-color: var(--hc-border);
    }

    /* Tables */
    .standings-table,
    .team-row,
    .table-header-row {
        border: 2px solid var(--hc-border);
        background-color: var(--hc-background);
    }

    .team-row:nth-child(even) {
        background-color: #111111;
    }

    .team-row:hover {
        background-color: #222222;
        border: 2px solid var(--hc-text-secondary);
    }

    /* Table cells */
    .team-row td,
    .table-header-row th {
        color: var(--hc-text-primary);
        border: 1px solid var(--hc-border);
    }

    /* Form indicators with high contrast */
    .form-token {
        border: 2px solid var(--hc-border);
        font-weight: bold;
    }

    .form-win,
    .form-token.W {
        background-color: var(--hc-accent) !important;
        color: var(--hc-background) !important;
    }

    .form-loss,
    .form-token.L {
        background-color: var(--hc-alert) !important;
        color: var(--hc-text-primary) !important;
    }

    .form-draw,
    .form-token.D {
        background-color: var(--hc-text-secondary) !important;
        color: var(--hc-background) !important;
    }

    /* Buttons */
    button,
    .league-btn,
    .wc-btn,
    .refresh-btn,
    .pin-btn,
    .clear-cache-btn {
        background-color: var(--hc-background);
        color: var(--hc-text-primary);
        border: 2px solid var(--hc-border);
    }

    button:hover,
    .league-btn:hover,
    .wc-btn:hover {
        background-color: var(--hc-text-primary);
        color: var(--hc-background);
    }

    button.active,
    .league-btn.active,
    .wc-btn.active {
        background-color: var(--hc-text-secondary);
        color: var(--hc-background);
        border: 3px solid var(--hc-border);
    }

    /* Live indicators */
    .live-indicator,
    .live-tag,
    .fixture-status-tag-v2.live-tag {
        background-color: var(--hc-alert) !important;
        color: var(--hc-text-primary) !important;
        border: 2px solid var(--hc-border);
    }

    /* Position indicators */
    .position-change-up {
        color: var(--hc-accent);
    }

    .position-change-down {
        color: var(--hc-alert);
    }

    /* Stale data warning */
    .stale-badge,
    .stale-warning {
        background-color: var(--hc-text-secondary);
        color: var(--hc-background);
        border: 2px solid var(--hc-border);
    }

    /* Loading and error states */
    .loading-state,
    .error-state,
    .retry-state {
        color: var(--hc-text-primary);
        background-color: var(--hc-background);
        border: 2px solid var(--hc-border);
    }

    .error-icon {
        color: var(--hc-alert);
    }

    /* Ensure all text meets contrast requirements */
    .dimmed {
        color: var(--hc-neutral) !important;
    }

    /* Team logos - add border for visibility */
    .team-logo,
    .fixture-logo,
    .fixture-logo-v2 {
        border: 1px solid var(--hc-border);
        background-color: var(--hc-text-primary);
        padding: 2px;
    }

    /* Highlighted teams */
    .highlighted-team {
        background-color: #1a1a1a;
        border: 3px solid var(--hc-text-secondary);
    }

    /* Position-based coloring with high contrast */
    .first-place {
        background-color: #003300;
        border-left: 4px solid var(--hc-accent);
    }

    .uefa-zone {
        background-color: #000033;
        border-left: 4px solid #0066FF;
    }

    .relegation-zone {
        background-color: #330000;
        border-left: 4px solid var(--hc-alert);
    }
}

/* Optional: Support for Windows High Contrast Mode */
@media (forced-colors: active) {
    .spfl-league-table {
        forced-color-adjust: none;
        border: 2px solid CanvasText;
    }

    .team-row,
    button {
        border: 1px solid CanvasText;
    }

    .form-token {
        border: 2px solid CanvasText;
        font-weight: bold;
    }
}

/* ==========================================
   SKELETON LOADING STATES (DES-05)
   Improves perceived performance
   ========================================== */

.skeleton-loader {
    width: 100%;
    padding: 10px 0;
}

.skeleton-table {
    width: 100%;
    border-collapse: collapse;
}

.skeleton-row {
    display: flex;
    gap: 10px;
    padding: 8px 5px;
    align-items: center;
}

.skeleton-cell {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.05) 0%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.05) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    border-radius: 4px;
    height: 16px;
}

/* Different widths for different columns */
.skeleton-cell.position {
    width: 30px;
}

.skeleton-cell.logo {
    width: 20px;
    height: 20px;
    border-radius: 50%;
}

.skeleton-cell.team {
    flex: 1;
    max-width: 150px;
}

.skeleton-cell.stat {
    width: 30px;
}

.skeleton-cell.form {
    width: 120px;
}

@keyframes shimmer {
    0% {
        background-position: -200% 0;
    }
    100% {
        background-position: 200% 0;
    }
}

/* Skeleton header */
.skeleton-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
}

.skeleton-title {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.1) 0%,
        rgba(255, 255, 255, 0.2) 50%,
        rgba(255, 255, 255, 0.1) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    width: 200px;
    height: 24px;
    border-radius: 4px;
}

.skeleton-meta {
    background: linear-gradient(
        90deg,
        rgba(255, 255, 255, 0.05) 0%,
        rgba(255, 255, 255, 0.15) 50%,
        rgba(255, 255, 255, 0.05) 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
    width: 120px;
    height: 14px;
    border-radius: 4px;
}

/* Fade transition from skeleton to real content */
.content-fade-in {
    animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }
    to {
        opacity: 1;
    }
}

/* Ensure no layout shift */
.skeleton-loader {
    min-height: 400px;
}

/* ==========================================
   PHASE 4: ADVANCED UX & DESIGN FEATURES
   ========================================== */

/* ==========================================
   UX-04: CONFIGURABLE TABLE DENSITY
   Provides compact, normal, and comfortable spacing options
   ========================================== */

/* Compact density - minimal padding for maximum information density */
.spfl-league-table.density-compact .team-row td,
.spfl-league-table.density-compact .table-header-row th {
    padding: 3px 2px;
    line-height: 1.1;
}

.spfl-league-table.density-compact .team-name {
    font-size: 11px;
}

.spfl-league-table.density-compact .team-logo,
.spfl-league-table.density-compact .fixture-logo,
.spfl-league-table.density-compact .fixture-logo-v2 {
    width: 16px;
    height: 16px;
}

.spfl-league-table.density-compact .form-token {
    width: 14px;
    height: 14px;
    font-size: 9px;
    margin: 0 1px;
}

.spfl-league-table.density-compact .fixture-row-v2 td {
    padding: 4px 3px;
}

/* Normal density - default balanced spacing (already defined in base styles) */
.spfl-league-table.density-normal .team-row td,
.spfl-league-table.density-normal .table-header-row th {
    padding: 6px 4px;
}

/* Comfortable density - generous padding for better readability */
.spfl-league-table.density-comfortable .team-row td,
.spfl-league-table.density-comfortable .table-header-row th {
    padding: 10px 6px;
    line-height: 1.4;
}

.spfl-league-table.density-comfortable .team-name {
    font-size: 15px;
}

.spfl-league-table.density-comfortable .team-logo,
.spfl-league-table.density-comfortable .fixture-logo,
.spfl-league-table.density-comfortable .fixture-logo-v2 {
    width: 24px;
    height: 24px;
}

.spfl-league-table.density-comfortable .form-token {
    width: 20px;
    height: 20px;
    font-size: 12px;
    margin: 0 2px;
}

.spfl-league-table.density-comfortable .fixture-row-v2 td {
    padding: 8px 6px;
}

/* ==========================================
   DES-02: FULL LIGHT/DARK MODE SUPPORT
   Comprehensive theme support with CSS variables
   ========================================== */

/* CSS Variables for Light Theme */
.spfl-league-table.theme-light,
.spfl-league-table.theme-auto {
    /* Base colors */
    --theme-bg-primary: #f5f5f5;
    --theme-bg-secondary: #ffffff;
    --theme-bg-hover: #e8e8e8;
    --theme-text-primary: #222222;
    --theme-text-secondary: #666666;
    --theme-text-muted: #999999;
    --theme-border: #cccccc;
    --theme-border-light: #e0e0e0;
    
    /* Semantic colors */
    --theme-accent: #0066cc;
    --theme-success: #28a745;
    --theme-warning: #ffc107;
    --theme-danger: #dc3545;
    --theme-info: #17a2b8;
    
    /* Position indicators */
    --theme-first-place: rgba(212, 175, 55, 0.2); /* Gold tint */
    --theme-uefa-zone: rgba(0, 123, 255, 0.15); /* Blue tint */
    --theme-relegation-zone: rgba(220, 53, 69, 0.15); /* Red tint */
    
    /* Form indicators */
    --theme-form-win: #28a745;
    --theme-form-draw: #ffc107;
    --theme-form-loss: #dc3545;
    
    /* Buttons */
    --theme-button-bg: #ffffff;
    --theme-button-text: #333333;
    --theme-button-hover-bg: #0066cc;
    --theme-button-hover-text: #ffffff;
    --theme-button-active-bg: #0052a3;
    
    /* Live indicators */
    --theme-live-bg: #dc3545;
    --theme-live-text: #ffffff;
    
    /* Stale data warning */
    --theme-stale-fresh: #28a745;
    --theme-stale-moderate: #ffc107;
    --theme-stale-old: #dc3545;
}

/* Apply light theme colors */
.spfl-league-table.theme-light,
.spfl-league-table.theme-auto {
    background-color: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

.spfl-league-table.theme-light .standings-table,
.spfl-league-table.theme-auto .standings-table {
    background-color: var(--theme-bg-secondary);
    border-color: var(--theme-border);
}

.spfl-league-table.theme-light .team-row,
.spfl-league-table.theme-auto .team-row {
    color: var(--theme-text-primary);
    border-bottom-color: var(--theme-border-light);
}

.spfl-league-table.theme-light .team-row:hover,
.spfl-league-table.theme-auto .team-row:hover {
    background-color: var(--theme-bg-hover);
}

.spfl-league-table.theme-light .table-header-row th,
.spfl-league-table.theme-auto .table-header-row th {
    color: var(--theme-text-secondary);
    border-bottom-color: var(--theme-border);
}

.spfl-league-table.theme-light .league-btn,
.spfl-league-table.theme-auto .league-btn {
    background-color: var(--theme-button-bg);
    color: var(--theme-button-text);
    border-color: var(--theme-border);
}

.spfl-league-table.theme-light .league-btn:hover,
.spfl-league-table.theme-auto .league-btn:hover {
    background-color: var(--theme-button-hover-bg);
    color: var(--theme-button-hover-text);
}

.spfl-league-table.theme-light .league-btn.active,
.spfl-league-table.theme-auto .league-btn.active {
    background-color: var(--theme-button-active-bg);
    color: var(--theme-button-hover-text);
}

/* CSS Variables for Dark Theme */
.spfl-league-table.theme-dark {
    /* Base colors */
    --theme-bg-primary: #1a1a1a;
    --theme-bg-secondary: #2d2d2d;
    --theme-bg-hover: #3a3a3a;
    --theme-text-primary: #f0f0f0;
    --theme-text-secondary: #b0b0b0;
    --theme-text-muted: #808080;
    --theme-border: #444444;
    --theme-border-light: #3a3a3a;
    
    /* Semantic colors */
    --theme-accent: #4d94ff;
    --theme-success: #5cb85c;
    --theme-warning: #f0ad4e;
    --theme-danger: #d9534f;
    --theme-info: #5bc0de;
    
    /* Position indicators */
    --theme-first-place: rgba(255, 215, 0, 0.2); /* Gold tint */
    --theme-uefa-zone: rgba(77, 148, 255, 0.2); /* Blue tint */
    --theme-relegation-zone: rgba(217, 83, 79, 0.2); /* Red tint */
    
    /* Form indicators */
    --theme-form-win: #5cb85c;
    --theme-form-draw: #f0ad4e;
    --theme-form-loss: #d9534f;
    
    /* Buttons */
    --theme-button-bg: #3a3a3a;
    --theme-button-text: #f0f0f0;
    --theme-button-hover-bg: #4d94ff;
    --theme-button-hover-text: #ffffff;
    --theme-button-active-bg: #3a7bd5;
    
    /* Live indicators */
    --theme-live-bg: #d9534f;
    --theme-live-text: #ffffff;
    
    /* Stale data warning */
    --theme-stale-fresh: #5cb85c;
    --theme-stale-moderate: #f0ad4e;
    --theme-stale-old: #d9534f;
    
    background-color: var(--theme-bg-primary);
    color: var(--theme-text-primary);
}

/* Apply dark theme colors */
.spfl-league-table.theme-dark .standings-table {
    background-color: var(--theme-bg-secondary);
    border-color: var(--theme-border);
}

.spfl-league-table.theme-dark .team-row {
    color: var(--theme-text-primary);
    border-bottom-color: var(--theme-border-light);
}

.spfl-league-table.theme-dark .team-row:hover {
    background-color: var(--theme-bg-hover);
}

.spfl-league-table.theme-dark .table-header-row th {
    color: var(--theme-text-secondary);
    border-bottom-color: var(--theme-border);
}

.spfl-league-table.theme-dark .league-btn {
    background-color: var(--theme-button-bg);
    color: var(--theme-button-text);
    border-color: var(--theme-border);
}

.spfl-league-table.theme-dark .league-btn:hover {
    background-color: var(--theme-button-hover-bg);
    color: var(--theme-button-hover-text);
}

.spfl-league-table.theme-dark .league-btn.active {
    background-color: var(--theme-button-active-bg);
    color: var(--theme-button-hover-text);
}

/* Auto theme - respects system preference */
@media (prefers-color-scheme: dark) {
    .spfl-league-table.theme-auto {
        /* Inherit dark theme variables */
        --theme-bg-primary: #1a1a1a;
        --theme-bg-secondary: #2d2d2d;
        --theme-bg-hover: #3a3a3a;
        --theme-text-primary: #f0f0f0;
        --theme-text-secondary: #b0b0b0;
        --theme-text-muted: #808080;
        --theme-border: #444444;
        --theme-border-light: #3a3a3a;
        --theme-accent: #4d94ff;
        --theme-success: #5cb85c;
        --theme-warning: #f0ad4e;
        --theme-danger: #d9534f;
        --theme-form-win: #5cb85c;
        --theme-form-draw: #f0ad4e;
        --theme-form-loss: #d9534f;
        --theme-button-bg: #3a3a3a;
        --theme-button-text: #f0f0f0;
        --theme-button-hover-bg: #4d94ff;
        --theme-button-active-bg: #3a7bd5;
        
        background-color: var(--theme-bg-primary);
        color: var(--theme-text-primary);
    }
}

/* ==========================================
   PERF-03: VIRTUAL SCROLLING SUPPORT
   For large tables with 50+ rows
   ========================================== */

.spfl-league-table.virtual-scrolling-enabled {
    position: relative;
}

.virtual-scroll-container {
    position: relative;
    overflow-y: auto;
    height: var(--mtlt-max-table-height);
    contain: strict;
}

.virtual-scroll-spacer {
    position: absolute;
    top: 0;
    left: 0;
    width: 1px;
    pointer-events: none;
}

.virtual-scroll-viewport {
    position: relative;
    will-change: transform;
}

/* Optimize virtual scrolling performance */
.virtual-scrolling-enabled .team-row {
    contain: layout style paint;
    will-change: transform;
}

/* ==========================================
   UX-07: OFFLINE MODE INDICATOR
   Display when internet connection is lost
   ========================================== */

.offline-indicator {
    background: linear-gradient(135deg, #ffa500 0%, #ff6b00 100%);
    color: #fff;
    padding: 8px 12px;
    border-radius: 4px;
    margin-bottom: 10px;
    font-size: var(--mtlt-font-size-small);
    display: flex;
    align-items: center;
    gap: 6px;
    animation: pulse 2s ease-in-out infinite;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
}

.offline-indicator i {
    font-size: 14px;
}

/* ==========================================
   A11Y-09: REDUCED MOTION SUPPORT
   Respect user's motion preferences
   ========================================== */

@media (prefers-reduced-motion: reduce) {
    * {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
    
    /* Disable animations */
    .offline-indicator {
        animation: none;
    }
    
    .skeleton-shimmer::before {
        animation: none;
    }
    
    /* Disable transforms */
    .refresh-btn:hover {
        transform: none;
    }
    
    .league-button:hover {
        transform: none;
    }
    
    /* Disable transitions */
    .team-row,
    .fixture-row,
    .league-button,
    .refresh-btn,
    .spfl-league-table {
        transition: none !important;
    }
}

/* ==========================================
   A11Y-10: ENHANCED FORM INDICATOR SHAPES
   Visual differentiation beyond color
   Active when config enhancedIndicatorShapes: true
   ========================================== */

/* Shape differentiation - scoped to enhanced mode only */
.form-tokens--enhanced .form-win {
    clip-path: circle(50%); /* Circular shape for wins */
}

.form-tokens--enhanced .form-draw {
    /* Square shape (default rectangle) for draws */
    clip-path: none;
}

.form-tokens--enhanced .form-loss {
    clip-path: polygon(50% 0%, 100% 100%, 0% 100%); /* Triangle shape for losses */
}

/* High contrast mode patterns - enhanced mode only */
@media (prefers-contrast: high) {
    .form-tokens--enhanced .form-win {
        background-image: repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(255, 255, 255, 0.3) 2px,
            rgba(255, 255, 255, 0.3) 4px
        );
    }

    .form-tokens--enhanced .form-loss {
        background-image: repeating-linear-gradient(
            -45deg,
            transparent,
            transparent 2px,
            rgba(255, 255, 255, 0.3) 2px,
            rgba(255, 255, 255, 0.3) 4px
        );
    }

    .form-tokens--enhanced .form-draw {
        background-image: repeating-linear-gradient(
            90deg,
            transparent,
            transparent 2px,
            rgba(255, 255, 255, 0.2) 2px,
            rgba(255, 255, 255, 0.2) 4px
        );
    }
}

/* ==========================================
   FLAT FORM INDICATOR MODE
   Active when config enhancedIndicatorShapes: false
   No background; colored text only
   ========================================== */

.form-tokens--flat span {
    background-color: transparent;
    border: none;
}

.form-tokens--flat span.form-win {
    background-color: transparent;
    border: none;
    color: #018749;
}

.form-tokens--flat span.form-draw {
    background-color: transparent;
    border: none;
    color: #888888;
}

.form-tokens--flat span.form-loss {
    background-color: transparent;
    border: none;
    color: #ff3333;
}


